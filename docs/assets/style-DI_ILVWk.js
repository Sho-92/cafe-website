(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();async function i(n,t,s){const r=await fetch(n);if(!r.ok)throw new Error(`ネットワークエラー: ${r.status}`);const e=await r.text(),o=document.createElement("div");o.innerHTML=e;const c=o.querySelector(`#${t}`);document.getElementById(s).innerHTML=c.innerHTML}document.querySelectorAll(".shop-menu-inner a").forEach(n=>{n.addEventListener("click",async t=>{t.preventDefault();const s=new URL(t.target.href).searchParams.get("product");console.log("クリックされた商品ID:",s),await a(s),history.pushState(null,"",t.target.href)})});async function a(n){const t=await fetch("../products.json");if(!t.ok){console.error("商品データの読み込みに失敗しました:",t.status);return}const r=(await t.json()).products.find(o=>o.id===n),e=document.querySelector(".shop-item");r?e&&(e.classList.add("fade-out"),setTimeout(()=>{const o=document.querySelector(".shop-item h2");console.log(o),o?(o.textContent=r.title,document.querySelector(".item-area img").src=r.image,document.querySelector(".item-text").textContent=r.description,document.querySelector(".item-price").textContent=r.price,document.querySelector(".about-item a").href=r.link,setTimeout(()=>{e.classList.remove("fade-out"),e.classList.add("show")},300)):console.error("h2要素が見つかりません。")},300)):console.warn("指定された商品が見つかりません:",n)}window.onload=async()=>{await Promise.all([i("./components/header.html","header-template","header-placeholder"),i("./components/footer.html","footer-template","footer-placeholder")]),l();const t=new URLSearchParams(window.location.search).get("product")||"1";await a(t)};window.onpopstate=async()=>{const t=new URLSearchParams(window.location.search).get("product")||"1";await a(t)};function l(){const n=document.querySelector(".toggle-menu-button"),t=document.querySelector(".header-site-menu");n&&t?n.addEventListener("click",function(){t.classList.toggle("is-show")}):console.warn("トグルボタンまたはメニューが見つかりません。")}
